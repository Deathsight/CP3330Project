{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\StudentAdmin\\\\Documents\\\\GitHub\\\\CP3330Project\\\\mallprojectreact\\\\src\\\\Profile.js\";\nimport React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Table from \"react-bootstrap/Table\";\nimport DB from \"./db.js\";\nimport { Link } from \"react-router-dom\";\nexport default class Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      User: null,\n      Tickets: []\n    };\n\n    this.handleDate = item => {\n      const datetime = new Date(item);\n      return \"\".concat(datetime.toDateString(), \" - \").concat(datetime.toLocaleTimeString());\n    };\n  }\n\n  async componentDidMount() {\n    const json = await DB.Users.findByQuery(\"profile\");\n    this.setState({\n      User: json\n    });\n\n    if (this.state.User.Role.Name === \"SupportAgent\") {\n      const json2 = await DB.SupportTickets.findAll();\n      this.setState({\n        Tickets: json2\n      });\n    }\n  }\n\n  render() {\n    return this.state.User ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, this.state.User.Role.Name === \"Renter\" ? React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }, \"User Profile\") : React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }, \"My Profile\"), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, \"Email:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, this.state.User.Email)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"Name:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, this.state.User.Name)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Phone Number:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, this.state.User.Phone)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Role:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, this.state.User.Role.Name)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/profile/edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Edit Profile\"))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), this.state.User.Role.Name === \"Renter\" ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Store Information\"), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Store Name:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, this.state.User.Renter.StoreName)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Type:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, this.state.User.Renter.Type)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Description:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, this.state.User.Renter.Description)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Available Discount Tokens:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.state.User.Renter.Tokens)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Store Status:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, this.state.User.Renter.Status)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/profile/editRenter/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Edit Renter Info\")))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"My Rents\"), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Start Date/Time\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"End Date/Time\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Asset\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Total Price\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Status\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"ReferalCode\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Security Company Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Security Level\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Renew Contract\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"End Contract\")), this.state.User.Renter.Rentings.map(item => React.createElement(\"tr\", {\n      key: item.Id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, this.handleDate(item.StartDateTime)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, this.handleDate(item.EndDateTime)), React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Asset Type\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Asset Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Asset Description\")), item.AssetRentings.map(item => React.createElement(\"tr\", {\n      key: item.Id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, item.Type), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, item.Name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, item.Description)))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, item.TotalPrice), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, item.Status), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, item.ReferalCode), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, item.Security.CompanyName), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, item.Security.Level), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/renting/renew/\".concat(item.Id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Renew Contract\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/renting/end/\".concat(item.Id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"End Contract\"))))))) : this.state.User.Role.Name === \"SupportAgent\" ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Tickets\"), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"User Email\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Start Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Close Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Status\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Type\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Priority\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Details\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Close Ticket\")), this.state.Tickets.map(item => React.createElement(\"tr\", {\n      key: item.Id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, item.UserEmail), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, this.handleDate(item.SubmitDate)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, this.handleDate(item.ClosedDate)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, item.Description), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, item.Status), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, item.ReferalCode), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, item.Security.CompanyName), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, item.Security.Level), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/support/details/\".concat(item.Id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Details\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/support/close/\".concat(item.Id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Close Ticket\"))))))) : React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Nothing else for your role. Soooon\")) : React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Loading...\");\n  }\n\n}","map":{"version":3,"sources":["C:/Users/StudentAdmin/Documents/GitHub/CP3330Project/mallprojectreact/src/Profile.js"],"names":["React","Table","DB","Link","Profile","Component","state","User","Tickets","handleDate","item","datetime","Date","toDateString","toLocaleTimeString","componentDidMount","json","Users","findByQuery","setState","Role","Name","json2","SupportTickets","findAll","render","Email","Phone","Renter","StoreName","Type","Description","Tokens","Status","Rentings","map","Id","StartDateTime","EndDateTime","AssetRentings","TotalPrice","ReferalCode","Security","CompanyName","Level","UserEmail","SubmitDate","ClosedDate"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport DB from \"./db.js\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Profile extends React.Component {\r\n  state = {\r\n    User: null,\r\n    Tickets: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const json = await DB.Users.findByQuery(\"profile\");\r\n    this.setState({ User: json });\r\n    if(this.state.User.Role.Name === \"SupportAgent\"){\r\n      const json2 = await DB.SupportTickets.findAll();\r\n      this.setState({ Tickets: json2 });\r\n    }\r\n  }\r\n  \r\n  handleDate = (item) => {\r\n    const datetime = new Date(item)\r\n    return `${datetime.toDateString()} - ${datetime.toLocaleTimeString()}`\r\n  }\r\n\r\n  render() {\r\n    return this.state.User ? (\r\n      <div>\r\n        {this.state.User.Role.Name === \"Renter\" ? ( <h2>User Profile</h2> ) : ( <h2>My Profile</h2> )}\r\n        \r\n\r\n        <Table striped bordered hover>\r\n          <tbody>\r\n            <tr>\r\n              <th>Email:</th>\r\n              <td>{this.state.User.Email}</td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th>Name:</th>\r\n              <td>{this.state.User.Name}</td>\r\n            </tr>\r\n\r\n              <tr>\r\n              <th>Phone Number:</th>\r\n              <td>{this.state.User.Phone}</td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th>Role:</th>\r\n              <td>{this.state.User.Role.Name}</td>\r\n            </tr>\r\n            \r\n            <tr><td><Link to={`/profile/edit`}>Edit Profile</Link></td></tr>\r\n          </tbody>\r\n        </Table>\r\n        <br/>\r\n\r\n        {this.state.User.Role.Name === \"Renter\" ? (\r\n          <div>\r\n\r\n            <h2>Store Information</h2>\r\n\r\n            <Table striped bordered hover>\r\n              <thead>\r\n                <tr>\r\n                  <th>Store Name:</th>\r\n                  <td>{this.state.User.Renter.StoreName}</td>\r\n                </tr>\r\n\r\n                <tr>\r\n                  <th>Type:</th>\r\n                  <td>{this.state.User.Renter.Type}</td>\r\n                </tr>\r\n\r\n                  <tr>\r\n                  <th>Description:</th>\r\n                  <td>{this.state.User.Renter.Description}</td>\r\n                </tr>\r\n\r\n                <tr>\r\n                  <th>Available Discount Tokens:</th>\r\n                  <td>{this.state.User.Renter.Tokens}</td>\r\n                </tr>\r\n\r\n                <tr>\r\n                  <th>Store Status:</th>\r\n                  <td>{this.state.User.Renter.Status}</td>\r\n                </tr>\r\n                \r\n                <td><Link to={`/profile/editRenter/`}>Edit Renter Info</Link></td>\r\n              </thead>\r\n            </Table>\r\n            <br/>\r\n            \r\n\r\n            <h2>My Rents</h2>\r\n\r\n            <Table striped bordered hover>\r\n              <thead>\r\n\r\n                <tr>\r\n                <th>Start Date/Time</th>\r\n                <th>End Date/Time</th>\r\n                <th>Asset</th>\r\n                <th>Total Price</th>\r\n                <th>Status</th>\r\n                <th>ReferalCode</th>\r\n                <th>Security Company Name</th>\r\n                <th>Security Level</th>\r\n                \r\n                <th>Renew Contract</th>\r\n                <th>End Contract</th>\r\n                \r\n                </tr>\r\n\r\n                {this.state.User.Renter.Rentings.map(item => (\r\n                  <tr key={item.Id}>\r\n                  <td>{this.handleDate(item.StartDateTime)}</td>\r\n\r\n                  <td>{this.handleDate(item.EndDateTime)}</td>\r\n\r\n                  <thead>\r\n\r\n                  <tr>\r\n                    <th>Asset Type</th>\r\n                    <th>Asset Name</th>\r\n                    <th>Asset Description</th>\r\n                  </tr>\r\n                    \r\n                  {item.AssetRentings.map(item => (\r\n                    <tr key={item.Id}>\r\n\r\n                      <td>{item.Type}</td>\r\n\r\n                      <td>{item.Name}</td>\r\n\r\n                      <td>{item.Description}</td>\r\n\r\n                    </tr>\r\n                  ))}\r\n                  </thead>\r\n\r\n                  <td>{item.TotalPrice}</td>\r\n\r\n                  <td>{item.Status}</td>\r\n\r\n                  <td>{item.ReferalCode}</td>\r\n\r\n                  <td>{item.Security.CompanyName}</td>\r\n\r\n                  <td>{item.Security.Level}</td>\r\n\r\n                  <td>\r\n                    {\r\n                      <Link to={`/renting/renew/${item.Id}`}>Renew Contract</Link>\r\n                    }\r\n                  </td>\r\n\r\n                  <td>\r\n                    {\r\n                      <Link to={`/renting/end/${item.Id}`}>End Contract</Link>\r\n                    }\r\n                  </td>\r\n                </tr>\r\n                ))}\r\n              </thead>\r\n            </Table>\r\n          </div>\r\n        ) : this.state.User.Role.Name === \"SupportAgent\" ? (\r\n\r\n          <div>\r\n            <h2>Tickets</h2>\r\n\r\n            <Table striped bordered hover>\r\n              <thead>\r\n\r\n                <tr>\r\n                <th>User Email</th>\r\n                <th>Start Date</th>\r\n                <th>Close Date</th>\r\n                <th>Description</th>\r\n                <th>Status</th>\r\n                <th>Type</th>\r\n                <th>Priority</th>\r\n                \r\n                <th>Details</th>\r\n                <th>Close Ticket</th>\r\n                \r\n                </tr>\r\n\r\n                {this.state.Tickets.map(item => (\r\n                  <tr key={item.Id}>\r\n\r\n                  <td>{item.UserEmail}</td>\r\n                  \r\n                  <td>{this.handleDate(item.SubmitDate)}</td>\r\n\r\n                  <td>{this.handleDate(item.ClosedDate)}</td>\r\n\r\n                  <td>{item.Description}</td>\r\n\r\n                  <td>{item.Status}</td>\r\n\r\n                  <td>{item.ReferalCode}</td>\r\n\r\n                  <td>{item.Security.CompanyName}</td>\r\n\r\n                  <td>{item.Security.Level}</td>\r\n\r\n                  <td>\r\n                    {\r\n                      <Link to={`/support/details/${item.Id}`}>Details</Link>\r\n                    }\r\n                  </td>\r\n\r\n                  <td>\r\n                    {\r\n                      <Link to={`/support/close/${item.Id}`}>Close Ticket</Link>\r\n                    }\r\n                  </td>\r\n                </tr>\r\n                ))}\r\n              </thead>\r\n            </Table>\r\n          </div>\r\n\r\n         ) : (\r\n        <h1>Nothing else for your role. Soooon</h1>\r\n\r\n        )}\r\n      </div>\r\n    ) : (\r\n      <h1>Loading...</h1>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}