{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\StudentAdmin\\\\Documents\\\\GitHub\\\\CP3330Project\\\\mallprojectreact\\\\src\\\\Account\\\\Login.js\";\nimport React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport { Link, Redirect } from 'react-router-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport DB from \"../db\";\nimport Auth from \"../auth\";\nexport default class Login extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Email: \"\",\n      Password: \"\",\n      isLoggedIn: false\n    };\n    this.background = {\n      zIndex: \"-1\",\n      position: \"relative\",\n      backgroundImage: \"url(https://wallpaperplay.com/walls/full/6/0/6/17357.jpg)\",\n      width: \"100%\",\n      minHeight: \"94.4vh\",\n      float: \"left\"\n    };\n    this.paper = {\n      width: \"450px\",\n      position: \"relative\",\n      marginTop: \"100px\",\n      paddingTop: \"35px\",\n      paddingRight: \"30px\",\n      paddingLeft: \"30px\",\n      paddingBottom: \"25px\",\n      boxShadow: \" 25px 25px 50px\",\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    };\n    this.avatar = {\n      margin: 1,\n      backgroundColor: \"darkblue\"\n    };\n    this.form = {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: 1\n    };\n    this.submit = {\n      marginLeft: 3,\n      marginTop: 10,\n      marginRight: 2,\n      marginBottom: 10\n    };\n\n    this.handleEmail = event => {\n      this.setState({\n        Email: event.target.value\n      });\n    };\n\n    this.handlePassword = event => {\n      this.setState({\n        Password: event.target.value\n      });\n    };\n\n    this.handleLogin = async () => {\n      const response = await fetch(\"/Token\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: \"grant_type=password&username=\".concat(this.state.Email, \"&password=\").concat(this.state.Password)\n      });\n      const json = await response.json();\n      console.log('json', json);\n      console.log('response', response);\n\n      if (response.ok) {\n        console.log('Logged in successfully');\n        Auth.login(json.access_token, json.userName);\n\n        if (!(await DB.Users.create())) {\n          console.log('Customer creation failed');\n        }\n\n        this.setState({\n          isLoggedIn: true\n        });\n      }\n    };\n  }\n\n  render() {\n    return Auth.isLoggedIn() ? React.createElement(Redirect, {\n      to: \"/profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      style: this.background,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: this.pageHeader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Container, {\n      component: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(CssBaseline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(Paper, {\n      style: this.paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      style: this.avatar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(LockOutlinedIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      component: \"h1\",\n      variant: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Sign In\"), React.createElement(\"div\", {\n      style: this.form,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      id: \"email\",\n      label: \"Email Address\",\n      name: \"email\",\n      autoComplete: \"email\",\n      autoFocus: true,\n      onChange: this.handleEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      name: \"password\",\n      label: \"Password\",\n      type: \"password\",\n      id: \"password\",\n      onChange: this.handlePassword,\n      autoComplete: \"current-password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"submit\",\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      style: this.submit,\n      onClick: this.handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Sign In\"), React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Link, {\n      href: \"/register\",\n      variant: \"body2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Don't have an account? Sign Up\"))))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/StudentAdmin/Documents/GitHub/CP3330Project/mallprojectreact/src/Account/Login.js"],"names":["React","Avatar","Button","Link","Redirect","CssBaseline","TextField","Grid","LockOutlinedIcon","Typography","Container","Paper","DB","Auth","Login","Component","state","Email","Password","isLoggedIn","background","zIndex","position","backgroundImage","width","minHeight","float","paper","marginTop","paddingTop","paddingRight","paddingLeft","paddingBottom","boxShadow","display","flexDirection","alignItems","avatar","margin","backgroundColor","form","submit","marginLeft","marginRight","marginBottom","handleEmail","event","setState","target","value","handlePassword","handleLogin","response","fetch","method","headers","body","json","console","log","ok","login","access_token","userName","Users","create","render","pageHeader"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,EAAP,MAAe,OAAf;AACA,OAAOC,IAAP,MAAiB,SAAjB;AAGA,eAAe,MAAMC,KAAN,SAAoBd,KAAK,CAACe,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAEjDC,KAFiD,GAEzC;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,UAAU,EAAE;AAHN,KAFyC;AAAA,SAOjDC,UAPiD,GAOtC;AACTC,MAAAA,MAAM,EAAE,IADC;AAETC,MAAAA,QAAQ,EAAE,UAFD;AAGTC,MAAAA,eAAe,6DAHN;AAITC,MAAAA,KAAK,EAAE,MAJE;AAKTC,MAAAA,SAAS,EAAE,QALF;AAMTC,MAAAA,KAAK,EAAC;AANG,KAPsC;AAAA,SAejDC,KAfiD,GAe1C;AACLH,MAAAA,KAAK,EAAC,OADD;AAELF,MAAAA,QAAQ,EAAE,UAFL;AAGLM,MAAAA,SAAS,EAAE,OAHN;AAILC,MAAAA,UAAU,EAAC,MAJN;AAKLC,MAAAA,YAAY,EAAC,MALR;AAMLC,MAAAA,WAAW,EAAC,MANP;AAOLC,MAAAA,aAAa,EAAE,MAPV;AAQLC,MAAAA,SAAS,EAAC,iBARL;AASLC,MAAAA,OAAO,EAAE,MATJ;AAULC,MAAAA,aAAa,EAAE,QAVV;AAWLC,MAAAA,UAAU,EAAE;AAXP,KAf0C;AAAA,SA4BjDC,MA5BiD,GA4BzC;AACNC,MAAAA,MAAM,EAAE,CADF;AAENC,MAAAA,eAAe,EAAE;AAFX,KA5ByC;AAAA,SAgCjDC,IAhCiD,GAgC3C;AACJhB,MAAAA,KAAK,EAAE,MADH;AACW;AACfI,MAAAA,SAAS,EAAE;AAFP,KAhC2C;AAAA,SAoCjDa,MApCiD,GAoCzC;AACNC,MAAAA,UAAU,EAAC,CADL;AAENd,MAAAA,SAAS,EAAC,EAFJ;AAGNe,MAAAA,WAAW,EAAC,CAHN;AAINC,MAAAA,YAAY,EAAC;AAJP,KApCyC;;AAAA,SA2ChDC,WA3CgD,GA2CjCC,KAAD,IAAW;AACxB,WAAKC,QAAL,CAAc;AAAC9B,QAAAA,KAAK,EAAE6B,KAAK,CAACE,MAAN,CAAaC;AAArB,OAAd;AACH,KA7CkD;;AAAA,SA+ChDC,cA/CgD,GA+C9BJ,KAAD,IAAW;AAC3B,WAAKC,QAAL,CAAc;AAAC7B,QAAAA,QAAQ,EAAE4B,KAAK,CAACE,MAAN,CAAaC;AAAxB,OAAd;AACH,KAjDkD;;AAAA,SAmDhDE,WAnDgD,GAmDlC,YAAY;AAEzB,YAAMC,QAAQ,GAAG,MAAMC,KAAK,WAAU;AAClCC,QAAAA,MAAM,EAAG,MADyB;AAElCC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAFyB;AAKlCC,QAAAA,IAAI,yCAAkC,KAAKxC,KAAL,CAAWC,KAA7C,uBAA+D,KAAKD,KAAL,CAAWE,QAA1E;AAL8B,OAAV,CAA5B;AAOA,YAAMuC,IAAI,GAAG,MAAML,QAAQ,CAACK,IAAT,EAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBF,IAAnB;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBP,QAAxB;;AACA,UAAGA,QAAQ,CAACQ,EAAZ,EAAe;AACXF,QAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA9C,QAAAA,IAAI,CAACgD,KAAL,CAAWJ,IAAI,CAACK,YAAhB,EAA8BL,IAAI,CAACM,QAAnC;;AACA,YAAG,EAAC,MAAMnD,EAAE,CAACoD,KAAH,CAASC,MAAT,EAAP,CAAH,EAA4B;AACxBP,UAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACH;;AACD,aAAKZ,QAAL,CAAc;AAAE5B,UAAAA,UAAU,EAAE;AAAd,SAAd;AACH;AACF,KAxEgD;AAAA;;AAyEjD+C,EAAAA,MAAM,GAAE;AAEN,WACErD,IAAI,CAACM,UAAL,KACA,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,GAGA;AAAK,MAAA,KAAK,EAAE,KAAKC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,KAAK,EAAE,KAAK+C,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAE,KAAKxC,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE,KAAKU,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFA,EAKA,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAC,IAAtB;AAA2B,MAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALA,EAQA;AAAK,MAAA,KAAK,EAAE,KAAKG,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AACE,MAAA,OAAO,EAAC,UADV;AAEE,MAAA,MAAM,EAAC,QAFT;AAGE,MAAA,QAAQ,MAHV;AAIE,MAAA,SAAS,MAJX;AAKE,MAAA,EAAE,EAAC,OALL;AAME,MAAA,KAAK,EAAC,eANR;AAOE,MAAA,IAAI,EAAC,OAPP;AAQE,MAAA,YAAY,EAAC,OARf;AASE,MAAA,SAAS,MATX;AAUE,MAAA,QAAQ,EAAE,KAAKK,WAVjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAaE,oBAAC,SAAD;AACE,MAAA,OAAO,EAAC,UADV;AAEE,MAAA,MAAM,EAAC,QAFT;AAGE,MAAA,QAAQ,MAHV;AAIE,MAAA,SAAS,MAJX;AAKE,MAAA,IAAI,EAAC,UALP;AAME,MAAA,KAAK,EAAC,UANR;AAOE,MAAA,IAAI,EAAC,UAPP;AAQE,MAAA,EAAE,EAAC,UARL;AASE,MAAA,QAAQ,EAAE,KAAKK,cATjB;AAUE,MAAA,YAAY,EAAC,kBAVf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,EAyBE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,SAAS,MAFX;AAGE,MAAA,OAAO,EAAC,WAHV;AAIE,MAAA,KAAK,EAAC,SAJR;AAKE,MAAA,KAAK,EAAE,KAAKT,MALd;AAME,MAAA,OAAO,EAAE,KAAKU,WANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAzBF,EAoCE,oBAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAC,WAAX;AAAuB,MAAA,OAAO,EAAC,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,gCADH,CADF,CADF,CApCF,CARA,CAFF,CADF,CADA,CAJF;AAiED;;AA5IgD","sourcesContent":["import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Paper from '@material-ui/core/Paper'\r\nimport DB from \"../db\";\r\nimport Auth from \"../auth\";\r\n\r\n\r\nexport default class Login extends React.Component {\r\n\r\n  state = {\r\n    Email: \"\",\r\n    Password: \"\",\r\n    isLoggedIn: false\r\n  }\r\n  background={\r\n    zIndex: \"-1\",\r\n    position: \"relative\",\r\n    backgroundImage:`url(https://wallpaperplay.com/walls/full/6/0/6/17357.jpg)`,\r\n    width: \"100%\",\r\n    minHeight: \"94.4vh\",\r\n    float:\"left\"\r\n  }\r\n  paper= {\r\n    width:\"450px\",\r\n    position: \"relative\",\r\n    marginTop: \"100px\",\r\n    paddingTop:\"35px\",\r\n    paddingRight:\"30px\",\r\n    paddingLeft:\"30px\",\r\n    paddingBottom: \"25px\",\r\n    boxShadow:\" 25px 25px 50px\",\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  }\r\n  avatar= {\r\n    margin: 1,\r\n    backgroundColor: \"darkblue\"\r\n  }\r\n  form= {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: 1\r\n  }\r\n  submit= {\r\n    marginLeft:3,\r\n    marginTop:10,\r\n    marginRight:2,\r\n    marginBottom:10\r\n  }\r\n\r\n   handleEmail = (event) => {\r\n    this.setState({Email: event.target.value})\r\n}\r\n\r\n   handlePassword = (event) => {\r\n    this.setState({Password: event.target.value})\r\n}\r\n\r\n   handleLogin = async () => {\r\n\r\n    const response = await fetch(`/Token`,{\r\n        method : 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        },\r\n        body: `grant_type=password&username=${this.state.Email}&password=${this.state.Password}`\r\n    })\r\n    const json = await response.json()\r\n    console.log('json',json)\r\n\r\n    console.log('response', response)\r\n    if(response.ok){\r\n        console.log('Logged in successfully')\r\n        Auth.login(json.access_token, json.userName)\r\n        if(!await DB.Users.create()){\r\n            console.log('Customer creation failed')\r\n        }\r\n        this.setState({ isLoggedIn: true });\r\n    }\r\n  }\r\n  render(){\r\n\r\n    return(\r\n      Auth.isLoggedIn() ? \r\n      <Redirect to=\"/profile\" />\r\n      :\r\n      <div style={this.background}>\r\n      <div style={this.pageHeader}>\r\n        <Container component=\"main\">\r\n        <CssBaseline />\r\n          <Paper style={this.paper}>\r\n            \r\n          <Avatar style={this.avatar} >\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign In\r\n          </Typography>\r\n          <div style={this.form}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"email\"\r\n              label=\"Email Address\"\r\n              name=\"email\"\r\n              autoComplete=\"email\"\r\n              autoFocus\r\n              onChange={this.handleEmail}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              onChange={this.handlePassword}\r\n              autoComplete=\"current-password\"\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={this.submit}\r\n              onClick={this.handleLogin}\r\n            >\r\n              Sign In\r\n            </Button>\r\n            \r\n            <Grid container>\r\n              <Grid item>\r\n                <Link href=\"/register\" variant=\"body2\" >\r\n                  {\"Don't have an account? Sign Up\"}\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n            </div>\r\n        </Paper>\r\n      </Container>\r\n      </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}