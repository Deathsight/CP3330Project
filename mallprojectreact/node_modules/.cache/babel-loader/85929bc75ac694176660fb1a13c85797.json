{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\StudentAdmin\\\\Documents\\\\GitHub\\\\CP3330Project\\\\mallprojectreact\\\\src\\\\News\\\\NewsEdit.js\";\nimport React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport DB from \"../db.js\";\nimport Button from \"react-bootstrap/Button\";\nimport { Redirect } from \"react-router-dom\";\nexport default class NewsEdit extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Topic: \"\",\n      Content: \"\",\n      RenterEmail: null,\n      newsId: null,\n      isEdited: false\n    };\n\n    this.handleTopic = event => {\n      this.setState({\n        Topic: event.target.value\n      });\n    };\n\n    this.handleContent = event => {\n      this.setState({\n        Content: event.target.value\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const json = await DB.News.findOne(this.props.match.params.id);\n    console.log(json);\n    this.setState({\n      newsId: json.Id,\n      RenterEmail: json.RenterEmail,\n      Topic: json.Topic,\n      Content: json.Content\n    });\n  }\n\n  async handleEditDB() {\n    const response = await DB.News.edit(this.state.newsId, {\n      Id: this.state.newsId,\n      RenterEmail: this.state.RenterEmail,\n      Topic: this.state.Topic,\n      Content: this.state.Content\n    });\n\n    if (response) {\n      this.setState({\n        isEdited: true\n      });\n    }\n  }\n\n  render() {\n    return this.state.isEdited ? React.createElement(Redirect, {\n      to: \"/news\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }) : this.state.newsId ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Edit News\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"input\", {\n      value: this.state.RenterEmail,\n      type: \"text\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Topic: \"), React.createElement(\"input\", {\n      value: this.state.Topic,\n      type: \"text\",\n      onChange: this.handleTopic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Content: \"), React.createElement(\"input\", {\n      value: this.state.Content,\n      type: \"text\",\n      onChange: this.handleContent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: () => this.handleEditDB(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Save\")) : React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Loading...\");\n  }\n\n}","map":{"version":3,"sources":["C:/Users/StudentAdmin/Documents/GitHub/CP3330Project/mallprojectreact/src/News/NewsEdit.js"],"names":["React","DB","Button","Redirect","NewsEdit","Component","state","Topic","Content","RenterEmail","newsId","isEdited","handleTopic","event","setState","target","value","handleContent","componentDidMount","json","News","findOne","props","match","params","id","console","log","Id","handleEditDB","response","edit","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,sCAAP;AACA,OAAOC,EAAP,MAAe,UAAf;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,eAAe,MAAMC,QAAN,SAAuBJ,KAAK,CAACK,SAA7B,CAAuC;AAAA;AAAA;AAAA,SACpDC,KADoD,GAC5C;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,OAAO,EAAE,EAFH;AAGNC,MAAAA,WAAW,EAAE,IAHP;AAINC,MAAAA,MAAM,EAAE,IAJF;AAKNC,MAAAA,QAAQ,EAAE;AALJ,KAD4C;;AAAA,SA+BpDC,WA/BoD,GA+BtCC,KAAK,IAAI;AACrB,WAAKC,QAAL,CAAc;AAAEP,QAAAA,KAAK,EAAEM,KAAK,CAACE,MAAN,CAAaC;AAAtB,OAAd;AACD,KAjCmD;;AAAA,SAkCpDC,aAlCoD,GAkCpCJ,KAAK,IAAI;AACvB,WAAKC,QAAL,CAAc;AAAEN,QAAAA,OAAO,EAAEK,KAAK,CAACE,MAAN,CAAaC;AAAxB,OAAd;AACD,KApCmD;AAAA;;AASpD,QAAME,iBAAN,GAA0B;AACxB,UAAMC,IAAI,GAAG,MAAMlB,EAAE,CAACmB,IAAH,CAAQC,OAAR,CAAgB,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAxC,CAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AACA,SAAKL,QAAL,CAAc;AAAEJ,MAAAA,MAAM,EAAES,IAAI,CAACS,EAAf;AAAmBnB,MAAAA,WAAW,EAAEU,IAAI,CAACV,WAArC;AAAmDF,MAAAA,KAAK,EAAEY,IAAI,CAACZ,KAA/D;AAAsEC,MAAAA,OAAO,EAAEW,IAAI,CAACX;AAApF,KAAd;AACD;;AAGD,QAAMqB,YAAN,GAAqB;AACnB,UAAMC,QAAQ,GAAG,MAAM7B,EAAE,CAACmB,IAAH,CAAQW,IAAR,CACtB,KAAKzB,KAAL,CAAWI,MADW,EAEtB;AACCkB,MAAAA,EAAE,EAAE,KAAKtB,KAAL,CAAWI,MADhB;AAECD,MAAAA,WAAW,EAAE,KAAKH,KAAL,CAAWG,WAFzB;AAGCF,MAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KAHnB;AAICC,MAAAA,OAAO,EAAE,KAAKF,KAAL,CAAWE;AAJrB,KAFsB,CAAvB;;AASA,QAAIsB,QAAJ,EAAc;AACZ,WAAKhB,QAAL,CAAc;AAAEH,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD;AACF;;AAUDqB,EAAAA,MAAM,GAAG;AACP,WAAO,KAAK1B,KAAL,CAAWK,QAAX,GACL,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK,GAGH,KAAKL,KAAL,CAAWI,MAAX,GACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJF,EAKE;AACE,MAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWG,WADpB;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,QAAQ,MAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAZF,EAaE;AACE,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWC,KADpB;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,QAAQ,EAAE,KAAKK,WAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,EAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBF,EAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBApBF,EAqBE;AACE,MAAA,KAAK,EAAE,KAAKN,KAAL,CAAWE,OADpB;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,QAAQ,EAAE,KAAKS,aAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArBF,EA0BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1BF,EA6BE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,MAAM,KAAKY,YAAL,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA7BF,CADA,GAiCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBApCJ;AAsCD;;AA9EmD","sourcesContent":["import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport DB from \"../db.js\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport default class NewsEdit extends React.Component {\r\n  state = {\r\n    Topic: \"\",\r\n    Content: \"\",\r\n    RenterEmail: null,\r\n    newsId: null,\r\n    isEdited: false\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const json = await DB.News.findOne(this.props.match.params.id)\r\n    console.log(json)\r\n    this.setState({ newsId: json.Id, RenterEmail: json.RenterEmail,  Topic: json.Topic, Content: json.Content });\r\n  }\r\n\r\n\r\n  async handleEditDB() {\r\n    const response = await DB.News.edit(\r\n     this.state.newsId   \r\n    ,{\r\n      Id: this.state.newsId,     \r\n      RenterEmail: this.state.RenterEmail,\r\n      Topic: this.state.Topic,\r\n      Content: this.state.Content\r\n    });\r\n\r\n    if (response) {\r\n      this.setState({ isEdited: true });\r\n    }\r\n  }\r\n\r\n  handleTopic = event => {\r\n    this.setState({ Topic: event.target.value });\r\n  };\r\n  handleContent = event => {\r\n    this.setState({ Content: event.target.value });\r\n  };\r\n\r\n\r\n  render() {\r\n    return this.state.isEdited ? (\r\n      <Redirect to=\"/news\" />\r\n    ) : (\r\n        this.state.newsId ? \r\n        <div>\r\n          <h2>Edit News</h2>\r\n          <br />\r\n\r\n          <label>Email: </label>\r\n          <input\r\n            value={this.state.RenterEmail}\r\n            type=\"text\"\r\n            disabled\r\n          ></input>\r\n          <br></br>\r\n\r\n          <label>Topic: </label>\r\n          <input\r\n            value={this.state.Topic}\r\n            type=\"text\"\r\n            onChange={this.handleTopic}\r\n          ></input>\r\n          <br></br>\r\n\r\n          <label>Content: </label>\r\n          <input\r\n            value={this.state.Content}\r\n            type=\"text\"\r\n            onChange={this.handleContent}\r\n          ></input>\r\n          <br></br>\r\n\r\n\r\n          <Button onClick={() => this.handleEditDB()}>Save</Button>\r\n        </div>\r\n        :\r\n        <h1>Loading...</h1>\r\n      );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}